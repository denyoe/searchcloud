(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{217:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(25),s=n.n(o),r=(n(91),n(19)),l=n(16),c=n(21),h=n(20),u=n(22),d=(n(92),n(93),n(85)),m=n(2),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).onMouseEnter=function(e){e.preventDefault()},n.onMouseLeave=function(e){e.preventDefault()},n.onClick=function(e){e.preventDefault();var t=n.props.children.props.children;n.props.fetchLinks(t)},n.state={content:"",links:[],showTooltip:!1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.children.props.children;this.props.fetchLinks(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.attributes,a={backgroundColor:e.color,color:"black",padding:".3em",cursor:"pointer"};return i.a.createElement("span",Object.assign({onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:a},{attributes:n}),t)}}]),t}(a.Component),g=n(56),f=n.n(g),y=m.m.fromJSON({document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",leaves:[{text:"\nHistory tells us what may happen next with Brexit & Trump\n\nIt seems we're entering another of those stupid seasons humans impose on themselves at fairly regular intervals. I am sketching out here opinions based on information, they may prove right, or may prove wrong, and they're intended just to challenge and be part of a wider dialogue.\n\nMy background is archaeology, so also history and anthropology. It leads me to look at big historical patterns. My theory is that most peoples perspective of history is limited to the experience communicated by their parents and grandparents, so 50-100 years. To go beyond that you have to read, study, and learn to untangle the propaganda that is inevitable in all telling of history. In a nutshell, at university I would fail a paper if I didn't compare at least two, if not three opposing views on a topic. Taking one telling of events as gospel doesn't wash in the comparative analytical method of research that forms the core of British academia. (I can't speak for other systems, but they're definitely not all alike in this way).\n\nSo zooming out, we humans have a habit of going into phases of mass destruction, generally self imposed to some extent or another. This handy list shows all the wars over time. Wars are actually the norm for humans, but every now and then something big comes along. I am interested in the Black Death, which devastated Europe. The opening of Boccaccio's Decameron describes Florence in the grips of the Plague. It is as beyond imagination as the Somme, Hiroshima, or the Holocaust. I mean, you quite literally can't put yourself there and imagine what it was like. For those in the midst of the Plague it must have felt like the end of the world.\n\nBut a defining feature of humans is their resilience. To us now it seems obvious that we survived the Plague, but to people at the time it must have seemed incredible that their society continued afterwards. Indeed, many takes on the effects of the Black Death are that it had a positive impact in the long term. Well summed up here: By targeting frail people of all ages, and killing them by the hundreds of thousands within an extremely short period of time, the Black Death might have represented a strong force of natural selection and removed the weakest individuals on a very broad scale within Europe, In addition, the Black Death significantly changed the social structure of some European regions. Tragic depopulation created the shortage of working people. This shortage caused wages to rise. Products prices fell too. Consequently, standards of living increased. For instance, people started to consume more food of higher quality.\n\nBut for the people living through it, as with the World Wars, Soviet Famines, Holocaust, it must have felt inconceivable that humans could rise up from it. The collapse of the Roman Empire, Black Death, Spanish Inquisition, Thirty Years War, War of the Roses, English Civil War it's a long list. Events of massive destruction from which humanity recovered and move on, often in better shape.\n\nAt a local level in time people think things are fine, then things rapidly spiral out of control until they become unstoppable, and we wreak massive destruction on ourselves. For the people living in the midst of this it is hard to see happening and hard to understand. To historians later it all makes sense and we see clearly how one thing led to another. During the Centenary of the Battle of the Somme I was struck that it was a direct outcome of the assassination of an Austrian Arch Duke in Bosnia. I very much doubt anyone at the time thought the killing of a European royal would lead to the death of 17 million people.\n\nMy point is that this is a cycle. It happens again and again, but as most people only have a 50-100 year historical perspective they don't see that it's happening again. As the events that led to the First World War unfolded, there were a few brilliant minds who started to warn that something big was wrong, that the web of treaties across Europe could lead to a war, but they were dismissed as hysterical, mad, or fools, as is always the way, and as people who worry about Putin, Brexit, and Trump are dismissed now.\n"}]}]}]}}),v={width:"50%"},k="http://127.0.0.1:8000/api/search_fetch",w=function(e){var t=Object.keys(e);return i.a.createElement("div",null,t.map(function(t){return function(e,t){switch(t){case"IMAGE":return i.a.createElement("div",{key:t},i.a.createElement("h4",null,t),i.a.createElement("ul",null,e.map(function(e){return i.a.createElement("li",{className:"borderless",key:e.rank},i.a.createElement("a",{target:"_",href:e.link},i.a.createElement("img",{alt:e.title,src:e.link})))})));default:return i.a.createElement("div",{key:t},i.a.createElement("h4",null,t),i.a.createElement("ul",null,e.map(function(e){return i.a.createElement("li",{key:e.rank},i.a.createElement("a",{target:"_",href:e.link},e.title))})))}}(e[t],t)}))},b=function(e){var t=e.links,n=e.isEmpty;if(e.isLoading){return i.a.createElement("div",{className:"c-inital"},i.a.createElement("i",{className:"fas fa-circle-notch fa-spin",style:{fontSize:"5em",margin:"0 170%"}}))}if(!n&&t.length){var a=[];return t.map(function(e){e.origin in a?a[e.origin].push({link:e.link,rank:e.rank,title:e.title,desc:e.desc}):a[e.origin]=[{link:e.link,rank:e.rank,title:e.title,desc:e.desc}]}),i.a.createElement("div",{className:"c-item"},w(a))}return t.length||n?i.a.createElement("div",{className:"c-inital"},"Your Query Returned No Results."):i.a.createElement("div",{className:"c-inital"},"Select a Section and Press ",i.a.createElement("em",null,"Ctrl+H")," to analyse")},E=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).schema={marks:{highlight:{isAtomic:!0}}},n.decorations=[],n.renderMark=function(e,t,a){var o=e.children,s=e.mark,r=e.attributes;switch(s.type){case"bold":return i.a.createElement("strong",{attributes:r},o);case"italic":return i.a.createElement("em",{attributes:r},o);case"code":return i.a.createElement("code",{attributes:r},o);case"underline":return i.a.createElement("u",{attributes:r},o);case"strikethrough":return i.a.createElement("strike",{attributes:r},o);case"highlight":return i.a.createElement(p,Object.assign({},e,{fetchLinks:n.fetchLinks,keyword:n.links,color:"yellow",setResults:n.setResults}));default:return a()}},n.plugins=[n.markPlugin()],n.ref=function(e){n.editor=e},n.mapKeywords=function(e){e.map(function(e){n.highlight(e)})},n.toggleLoading=function(){console.log("toggle loading..."),n.setState({isLoading:!n.state.isLoading})},n.fetchLinks=function(e){var t=new FormData;t.set("keywords",JSON.stringify([e])),console.log("fetching..."),n.toggleLoading(),f()({method:"POST",url:k,data:t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){var t=e.data.links;n.toggleLoading(),t.length?n.setState({isEmpty:!1}):n.setState({isEmpty:!0}),n.setState({links:t})}).catch(function(e){return console.log(e.message)})},n.setResults=function(e){n.setState({links:e})},n.onChange=function(e){var t=e.value;n.setState({value:t})},n.onKeyDown=function(e,t,n){if(!e.ctrlKey)return n();switch(e.preventDefault(),e.key){case"b":return t.toggleMark("bold"),!0;case"h":return t.toggleMark("highlight"),!0;default:return n()}},n.state={value:y,isLoading:!1,isEmpty:!1,links:[]},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"markPlugin",value:function(){return{renderMark:this.renderMark}}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"fetchKeywords",value:function(e){var t=this,n=new FormData;n.set("content",e),f()({method:"POST",url:"http://127.0.0.1:8000/api/keywords",data:n,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){var n=e.data;console.log(n.links),t.toggleLoading(),n.links.length?t.setState({isEmpty:!1}):t.setState({isEmpty:!0}),t.setState({links:n.links})}).catch(function(e){return console.log(e.message)})}},{key:"highlight",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.editor),a=e.content;n.value.document.getTexts().forEach(function(n){var i=n.key,o=n.text.split(a),s=0;o.forEach(function(n,o){0!==o&&t.decorations.push({anchor:{key:i,offset:s-a.length},focus:{key:i,offset:s},mark:{type:"highlight",data:m.c.fromJSON({keyword:e})}}),s=s+n.length+a.length})}),n.withoutSaving(function(){n.setDecorations(t.decorations)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"c-main"},i.a.createElement("div",{className:"c-text"},i.a.createElement(d.a,{plugins:this.plugins,ref:this.ref,defaultValue:this.state.value,schema:this.schema,onChange:this.onChange,onKeyDown:this.onKeyDown,styles:v})),i.a.createElement("div",{className:"c-results"},i.a.createElement(b,{isLoading:this.state.isLoading,isEmpty:this.state.isEmpty,links:this.state.links})))}}]),t}(a.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(E,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,t,n){e.exports=n(217)},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.d38966db.chunk.js.map